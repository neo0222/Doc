## レイヤー3

### 概要
- レイヤー3は、ネットワーク間の、インターネットワークでの接続を担当する。
  - インターネットワーク：全世界をつないでいるネットワーク
- 膨大なトラフィックを制御するため、小さなネットワークに細分化する必要がある。
- レイヤー3は論理アドレスを使う。
  - どこに、何があるかを表すアドレス
- 論理アドレスを使って、経由するネットワークを探索する（ルーティング）
- ルータがネットワーク間を接続する。
- ルータは最適な経路を選択し、スイッチングを行う。
- ルータがなければネットワーク間の接続は行えない。


### インタ―ネットプロトコル（IP)
- インターネットでは**TCP/IP**プロトコルを用いる。
  1. 論理アドレス（どこに、何があるかの情報）を決定する
  1. 経路を設定する
  1. 転送（コネクションレス型通信）
- TCP/IPプロトコルは複数のプロトコルの集合体である。
- レイヤ3のデータ転送を行うのはIPである。
- IPのカプセル化にはセグメントにIPヘッダをつける。
- 送信元と宛先のアドレスがある。

### IPアドレス
- IPアドレスは**ネットワーク管理者**が、**各デバイス**の、**ネットワークとの接続点**ごとにつける。
-
## ルータ

![img](http://www^.biglobe.ne.jp/aji/3min/img/router2.gif)

- ルータもポートを持っている
- ハブやブリッジと違い、論理アドレスを持ち、パケットを受け取って送り出す。
  - ルータのポートは各ネットワークに所属する形になる。
  - データ転送は同じネットワーク内でしか行えないから。
- ルータはルーティングテーブル（最適なルートの地図）を持っている。

### デフォルトゲートウェイ
- ルータはブロードキャストドメインを分けることができる i.e. ブロードキャストを他のネットワークに送り出さない。
- but 宛先のMACアドレスを知るためのARP自体がブロードキャストなので、このままだと困る。
